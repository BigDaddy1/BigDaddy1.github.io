<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0">
    <meta charset="utf-8">
    <title>KML Layers</title>
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
     <textarea id="csv" class="text" style="display:none;">latitude,longitude,brightness,scan,track,acq_date,acq_time,satellite,confidence,version,bright_t31,frp,daynight
41.312,34.5,306.4,2.2,1.4,2017-04-29,0020,A,68,6.0NRT,277.6,35.9,N
53.138,8.685,301,1.1,1,2017-04-29,0155,A,36,6.0NRT,275,10.7,N
52.157,10.414,305,1.3,1.1,2017-04-29,0155,A,62,6.0NRT,277.6,16,N
51.485,6.72,325.4,1,1,2017-04-29,0155,A,100,6.0NRT,277.2,28.1,N
51.365,6.71,300,1,1,2017-04-29,0155,A,12,6.0NRT,276.4,8.9,N
51.178,3.813,300.6,1,1,2017-04-29,0155,A,30,6.0NRT,278.9,8.2,N
51.167,3.824,312.3,1,1,2017-04-29,0155,A,84,6.0NRT,276.5,15.8,N
43.453,4.905,300.1,1.1,1.1,2017-04-29,0155,A,11,6.0NRT,277.1,8.6,N
43.444,4.902,304.2,1.1,1.1,2017-04-29,0155,A,35,6.0NRT,278.9,11.2,N
53.948,34.916,323.1,2.8,1.6,2017-04-29,0800,T,78,6.0NRT,289.5,86.6,D
53.236,33.427,310.9,3.2,1.7,2017-04-29,0800,T,62,6.0NRT,291,45.3,D
53.225,33.419,306.6,3.2,1.7,2017-04-29,0800,T,40,6.0NRT,291.7,28.8,D
52.509,34.42,326.9,2.9,1.6,2017-04-29,0800,T,81,6.0NRT,295.5,105.4,D
52.508,34.412,323.9,2.9,1.6,2017-04-29,0800,T,79,6.0NRT,295.8,89.5,D
52.507,34.455,310.6,2.9,1.6,2017-04-29,0800,T,56,6.0NRT,294.9,32,D
52.097,33.871,309.7,3,1.7,2017-04-29,0800,T,41,6.0NRT,296.4,25.1,D
52.098,33.865,310.5,3,1.7,2017-04-29,0800,T,27,6.0NRT,296.5,27.6,D
51.316,33.706,309.2,3,1.7,2017-04-29,0800,T,22,6.0NRT,295.8,23.3,D
48.146,34.384,317.1,2.6,1.6,2017-04-29,0805,T,64,6.0NRT,302,32.8,D
48.134,34.347,319.9,2.7,1.6,2017-04-29,0805,T,71,6.0NRT,299.8,43.9,D
48.132,34.383,331,2.6,1.6,2017-04-29,0805,T,83,6.0NRT,301.4,94.5,D
48.144,34.342,316.2,2.7,1.6,2017-04-29,0805,T,46,6.0NRT,300.7,29.9,D
48.142,34.378,334.3,2.6,1.6,2017-04-29,0805,T,86,6.0NRT,302.5,112.8,D
46.723,33.246,312.9,3,1.6,2017-04-29,0805,T,36,6.0NRT,299.8,28.3,D
46.723,33.241,311.3,3,1.6,2017-04-29,0805,T,38,6.0NRT,299.7,23.8,D
41.588,12.632,311.4,1.5,1.2,2017-04-29,0945,T,71,6.0NRT,295.8,14.6,D
53.945,34.912,319.6,2.3,1.5,2017-04-29,0940,T,77,6.0NRT,296.7,44.4,D
53.937,34.944,308.5,2.3,1.5,2017-04-29,0940,T,16,6.0NRT,295.9,15.4,D
53.233,33.447,306.3,2.1,1.4,2017-04-29,0940,T,36,6.0NRT,283,19.1,D
53.001,34.315,307.7,2.3,1.5,2017-04-29,0940,T,44,6.0NRT,293.2,15.9,D
52.138,34.231,319.4,2.4,1.5,2017-04-29,0940,T,75,6.0NRT,300,40.8,D
52.131,34.221,312.6,2.4,1.5,2017-04-29,0940,T,34,6.0NRT,299,17.5,D
52.026,33.245,309.4,2.2,1.4,2017-04-29,0940,T,53,6.0NRT,294.4,16.4,D
52.018,33.276,320.8,2.2,1.4,2017-04-29,0940,T,77,6.0NRT,292.3,47.2,D
51.851,33.708,319.6,2.4,1.5,2017-04-29,0940,T,66,6.0NRT,293.8,47.4,D
51.843,33.698,324,2.4,1.5,2017-04-29,0940,T,69,6.0NRT,295.4,66.3,D
51.873,33.353,313,2.3,1.5,2017-04-29,0940,T,65,6.0NRT,293.4,24.3,D
49.683,32.7,322.3,2.5,1.5,2017-04-29,0940,T,76,6.0NRT,297.9,53.4,D
49.675,32.732,323.9,2.5,1.5,2017-04-29,0940,T,78,6.0NRT,300.4,62.2,D
49.67,32.722,326.4,2.5,1.5,2017-04-29,0940,T,68,6.0NRT,299.4,65.6,D
49.756,31.184,346.4,2.1,1.4,2017-04-29,0940,T,90,6.0NRT,293.4,142.3,D
49.75,31.212,347.9,2.1,1.4,2017-04-29,0940,T,94,6.0NRT,294,150.4,D
49.744,31.178,338.3,2.1,1.4,2017-04-29,0940,T,70,6.0NRT,291,99.8,D
49.738,31.205,342.2,2.1,1.4,2017-04-29,0940,T,91,6.0NRT,291.8,118.3,D
49.756,31.179,336.1,2.1,1.4,2017-04-29,0940,T,66,6.0NRT,293,89.3,D
49.75,31.207,357.3,2.1,1.4,2017-04-29,0940,T,98,6.0NRT,294.4,213.5,D
49.738,31.2,340,2.1,1.4,2017-04-29,0940,T,90,6.0NRT,291.3,109.7,D
48.71,31.83,322.8,2.4,1.5,2017-04-29,0940,T,76,6.0NRT,302.6,47,D
48.716,31.827,321.5,2.4,1.5,2017-04-29,0940,T,74,6.0NRT,301.8,45.4,D
49.147,29.626,324.6,1.9,1.3,2017-04-29,0940,T,79,6.0NRT,299.6,37.9,D
49.154,29.624,324.5,1.9,1.3,2017-04-29,0940,T,79,6.0NRT,298.6,40.7,D
49.148,28.941,320.1,1.7,1.3,2017-04-29,0940,T,74,6.0NRT,301.7,17.7,D
48.269,14.328,302.2,1.5,1.2,2017-04-29,0940,T,25,6.0NRT,283.6,7.3,D
36.499,33.199,320.3,1.9,1.3,2017-04-29,1125,A,69,6.0NRT,305.1,20.3,D
35.39,23.856,316.3,1.2,1.1,2017-04-29,1125,A,66,6.0NRT,297.4,12.3,D
35.388,23.843,329.5,1.2,1.1,2017-04-29,1125,A,82,6.0NRT,298.5,29.5,D
36.931,30.652,321.5,1.3,1.1,2017-04-29,1125,A,61,6.0NRT,307.7,12.6,D
36.929,30.637,320.5,1.3,1.1,2017-04-29,1125,A,48,6.0NRT,307.8,12,D
40.346,33.805,323.2,2.3,1.5,2017-04-29,1125,A,63,6.0NRT,312.2,21.4,D
40.342,33.801,325.1,2.3,1.5,2017-04-29,1125,A,75,6.0NRT,312.7,27.7,D
40.445,27.14,313.7,1.1,1,2017-04-29,1125,A,29,6.0NRT,298.9,6,D
48.667,28.647,312.4,1.5,1.2,2017-04-29,1125,A,49,6.0NRT,294.2,10.3,D
49.093,29.83,314.8,1.7,1.3,2017-04-29,1125,A,47,6.0NRT,295.5,10.3,D
49.091,29.806,317.4,1.7,1.3,2017-04-29,1125,A,64,6.0NRT,296.7,15.5,D
49.675,32.725,319.9,2.5,1.5,2017-04-29,1125,A,69,6.0NRT,301,41.6,D
49.674,32.69,318.9,2.5,1.5,2017-04-29,1125,A,54,6.0NRT,298.4,33.5,D
49.741,31.187,349.5,2.1,1.4,2017-04-29,1125,A,95,6.0NRT,294.2,152.7,D
49.859,31.017,325.2,2,1.4,2017-04-29,1125,A,77,6.0NRT,301.2,36.5,D
51.849,33.683,313.1,2.9,1.6,2017-04-29,1125,A,64,6.0NRT,290.3,38.8,D
52.094,33.855,309.1,3,1.6,2017-04-29,1125,A,52,6.0NRT,288,29.2,D
53.019,34.031,314.3,3.1,1.7,2017-04-29,1125,A,70,6.0NRT,291.7,45.6,D
53.146,33.833,323.4,3,1.6,2017-04-29,1125,A,80,6.0NRT,295.8,80.9,D
53.145,33.787,309.8,3,1.6,2017-04-29,1125,A,34,6.0NRT,294,22.6,D
53.146,33.824,324.8,3,1.6,2017-04-29,1125,A,81,6.0NRT,295.8,86.7,D
49.667,32.685,310.5,3.3,1.7,2017-04-29,0950,A,29,6.0NRT,295.4,28,D
49.675,32.726,310.6,3.3,1.7,2017-04-29,0950,A,35,6.0NRT,297.6,30.4,D
50.132,34.15,313.7,2.7,1.6,2017-04-29,0950,A,31,6.0NRT,300.9,29.8,D
49.733,31.189,316,3.9,1.8,2017-04-29,0950,A,65,6.0NRT,295.2,61.5,D
49.738,31.177,318.6,3.9,1.8,2017-04-29,0950,A,70,6.0NRT,295.5,77.9,D
51.024,31.9,309.7,3.2,1.7,2017-04-29,0950,A,30,6.0NRT,291.3,23.5,D
51.847,33.676,318.6,2.5,1.5,2017-04-29,0950,A,72,6.0NRT,293.7,48.1,D
51.87,33.331,310.1,2.6,1.5,2017-04-29,0950,A,52,6.0NRT,295.8,19.8,D
52.088,33.851,310.8,2.4,1.5,2017-04-29,0950,A,52,6.0NRT,298.8,19.9,D
52.017,33.258,318.2,2.6,1.5,2017-04-29,0950,A,72,6.0NRT,293.1,49.8,D
52.488,34.84,318.7,2.1,1.4,2017-04-29,0950,A,52,6.0NRT,301.4,26,D
52.488,34.833,317.7,2.1,1.4,2017-04-29,0950,A,56,6.0NRT,301.1,27.6,D
53.938,34.907,318.7,1.9,1.3,2017-04-29,0950,A,77,6.0NRT,299,33,D
53.931,34.88,326.1,1.9,1.3,2017-04-29,0950,A,83,6.0NRT,297.6,52.1,D
53.941,34.9,314.8,1.9,1.3,2017-04-29,0950,A,52,6.0NRT,298.2,22.2,D
53.935,34.873,318.1,1.9,1.3,2017-04-29,0950,A,60,6.0NRT,296.9,28.8,D
54.072,34.927,310.6,1.9,1.3,2017-04-29,0950,A,66,6.0NRT,297.3,17.1,D
46.801,4.431,300.7,2.1,1.4,2017-04-29,1120,T,27,6.0NRT,290.1,9.8,D
47.387,0.763,301,1.3,1.1,2017-04-29,1120,T,14,6.0NRT,289.4,3.4,D
45.213,-0.895,316.7,1.2,1.1,2017-04-29,1120,T,42,6.0NRT,303.9,13,D
43.442,4.896,307.9,2.7,1.6,2017-04-29,1120,T,0,6.0NRT,296,27,D
43.559,-5.903,314.6,1,1,2017-04-29,1120,T,57,6.0NRT,301.9,7.4,D
43.539,-5.832,317.2,1,1,2017-04-29,1120,T,75,6.0NRT,301.4,11.2,D
43.55,-8.232,311.6,1.1,1,2017-04-29,1120,T,65,6.0NRT,296.9,7.1,D
43.547,-8.253,308.5,1.1,1,2017-04-29,1120,T,48,6.0NRT,296.4,6,D
43.546,-8.24,355.3,1.1,1,2017-04-29,1120,T,74,6.0NRT,298.4,80.9,D
42.038,-6.566,335.1,1.7,1.3,2017-04-29,1305,A,0,6.0NRT,288.4,68.7,D
42.04,-6.55,351.7,1.7,1.3,2017-04-29,1305,A,63,6.0NRT,288.6,133.9,D
41.947,-8.589,318.7,2.2,1.4,2017-04-29,1305,A,77,6.0NRT,295.1,45.8,D
42.676,-7.911,306.4,1.9,1.3,2017-04-29,1305,A,54,6.0NRT,286.1,17.7,D
42.671,-7.934,304.2,1.9,1.3,2017-04-29,1305,A,40,6.0NRT,285.4,14.6,D
45.213,-0.893,319.9,1,1,2017-04-29,1305,A,32,6.0NRT,308,10.4,D
49.246,6.839,313.9,2.1,1.4,2017-04-29,1305,A,33,6.0NRT,289.5,30.5,D
48.486,34.968,318.1,1.2,1.1,2017-04-29,1915,T,96,6.0NRT,285.4,25,N
48.749,33.709,307.4,1.4,1.2,2017-04-29,1915,T,71,6.0NRT,284,17.2,N
52.803,34.883,300.7,1.1,1,2017-04-29,1915,T,32,6.0NRT,280.9,7.8,N
53.148,33.811,308.9,1.1,1.1,2017-04-29,1915,T,76,6.0NRT,283.9,13.6,N
48.277,14.342,302,1,1,2017-04-29,2050,T,46,6.0NRT,278.6,8.6,N
48.275,14.329,301.6,1,1,2017-04-29,2050,T,42,6.0NRT,278.6,8.5,N
48.284,14.326,300.4,1,1,2017-04-29,2050,T,7,6.0NRT,277.5,7,N
50.059,20.117,313.6,1.4,1.2,2017-04-29,2050,T,88,6.0NRT,270.6,29.1,N
51.368,6.709,300.4,1.5,1.2,2017-04-29,2055,T,26,6.0NRT,281.3,14.1,N
52.162,10.419,306.4,1.1,1,2017-04-29,2055,T,68,6.0NRT,276.2,12.7,N
52.159,10.404,322.2,1.1,1,2017-04-29,2055,T,100,6.0NRT,277.6,27.3,N
51.486,6.708,305.7,1.5,1.2,2017-04-29,2055,T,65,6.0NRT,281.1,18.4,N
58.358,12.378,303.9,1,1,2017-04-29,2055,T,57,6.0NRT,274,11.6,N
42.29,-8.169,314.2,1,1,2017-04-29,2230,T,84,6.0NRT,271.1,17.1,N</textarea>
    <div id="map"></div>
    <script>
 function initMap() {
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 3,
          center: {lat: -34.397, lng: 150.644}
        });
   
     
        var infoWindow = new google.maps.InfoWindow({map: map}); 
// Try HTML5 geolocation. 
if (navigator.geolocation) { 
navigator.geolocation.getCurrentPosition(function(position) { 
var pos = { 
lat: position.coords.latitude, 
lng: position.coords.longitude 
}; 
infoWindow.setPosition(pos); 
infoWindow.setContent('You are here.'); 
var mylat = pos.lat; 
var mylng = pos.lng; 
var coor = new String (mylat+" "+mylng); 
alert(coor) ; 
map.setCenter(pos); 
var cityCircle = new google.maps.Circle({ 
strokeColor: '#FF0000', 
strokeOpacity: 0.8, 
strokeWeight: 2, 
fillColor: '#FF0000', 
fillOpacity: 0.35, 
map: map, 
center: pos, 
radius: Math.sqrt(250000) * 100 
}); 
}, function() { 
handleLocationError(true, infoWindow, map.getCenter()); 
}); 
} else { 
// Browser doesn't support Geolocation 
handleLocationError(false, infoWindow, map.getCenter());
} 

var europe = new google.maps.KmlLayer({ 
url: 'https://firms.modaps.eosdis.nasa.gov/active_fire/c6/k..', 
map: map 
});
           
                  function CSVToArray(strData, strDelimiter) {
    // Check to see if the delimiter is defined. If not,
    // then default to comma.
    strDelimiter = (strDelimiter || ",");
    // Create a regular expression to parse the CSV values.
    var objPattern = new RegExp((
    // Delimiters.
    "(\\" + strDelimiter + "|\\r?\\n|\\r|^)" +
    // Quoted fields.
    "(?:\"([^\"]*(?:\"\"[^\"]*)*)\"|" +
    // Standard fields.
    "([^\"\\" + strDelimiter + "\\r\\n]*))"), "gi");
    // Create an array to hold our data. Give the array
    // a default empty first row.
    var arrData = [[]];
    // Create an array to hold our individual pattern
    // matching groups.
    var arrMatches = null;
    // Keep looping over the regular expression matches
    // until we can no longer find a match.
    while (arrMatches = objPattern.exec(strData)) {
        // Get the delimiter that was found.
        var strMatchedDelimiter = arrMatches[1];
        // Check to see if the given delimiter has a length
        // (is not the start of string) and if it matches
        // field delimiter. If id does not, then we know
        // that this delimiter is a row delimiter.
        if (strMatchedDelimiter.length && (strMatchedDelimiter != strDelimiter)) {
            // Since we have reached a new row of data,
            // add an empty row to our data array.
            arrData.push([]);
        }
        // Now that we have our delimiter out of the way,
        // let's check to see which kind of value we
        // captured (quoted or unquoted).
        if (arrMatches[2]) {
            // We found a quoted value. When we capture
            // this value, unescape any double quotes.
            var strMatchedValue = arrMatches[2].replace(
            new RegExp("\"\"", "g"), "\"");
        } else {
            // We found a non-quoted value.
            var strMatchedValue = arrMatches[3];
        }
        // Now that we have our value string, let's add
        // it to the data array.
        arrData[arrData.length - 1].push(strMatchedValue);
    }
    // Return the parsed data.
                     
    return (arrData);
}

function CSV2JSON(csv) {
    var array = CSVToArray(csv);
    var objArray = [];
    for (var i = 1; i < array.length; i++) {
        objArray[i - 1] = {};
        for (var k = 0; k < array[0].length && k < array[i].length; k++) {
            var key = array[0][k];
            objArray[i - 1][key] = array[i][k]

        }
    }
            
    var json = JSON.stringify(objArray);
    var str = json.replace(/},/g, "},\r\n");

    return str;
}

 ;
   var csv= document.getElementById("csv").value;
                
   var json = CSV2JSON(csv);
              
            var coord=JSON.parse(json);
                 var checkk=false;
                 for (var i = 0; i < coord.length; i++){
  
                var distancee = Math.sqrt((position.coords.latitude-coord[i].latitude)*(position.coords.latitude-coord[i].latitude)  + (position.coords.longitude-coord[i].longitude)*(position.coords.longitude-coord[i].longitude));
 if (distancee<=0.4504) {
   checkk=true;
}                 
}
          function checker() {
     if(checkk==true){alert("Point of fire is possible in your area. Please, be careful.");}
else {alert("There is no possible point of fire in your area. Have a nice day.");}
  }      
 
setTimeout(checker, 3000);
                 
    
        
      }
    </script>
     
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAi_K-aOvGFhhBTwwJH4Hwnzrbo-CHYTwY&callback=initMap">
    </script>
  </body>
</html>
